[gd_scene load_steps=18 format=3 uid="uid://4u2ik7uota0b"]

[ext_resource type="Script" uid="uid://ch0jvvraplm8c" path="res://prefabs/player/Player.gd" id="1_f3sb7"]
[ext_resource type="PackedScene" uid="uid://1dt4e3g2whcf" path="res://prefabs/ui/DamageIndicator.tscn" id="2_036b0"]
[ext_resource type="PackedScene" uid="uid://q0pf7j62g208" path="res://prefabs/enemies/MeeleEnemy.tscn" id="2_fj7yv"]
[ext_resource type="Script" uid="uid://8l1uf4g37gjc" path="res://CameraUtil.gd" id="2_tlwt5"]
[ext_resource type="Texture2D" uid="uid://crsq0dg0y7ts" path="res://assets/items/Wollbombe.png" id="3_aqk2v"]
[ext_resource type="StyleBox" uid="uid://cwckpqkq8q65f" path="res://assets/items/unselected_item.tres" id="4_dwbse"]
[ext_resource type="Texture2D" uid="uid://wmv4vnqm7ihn" path="res://assets/items/gurke64x64.png" id="6_pkg7o"]
[ext_resource type="PackedScene" uid="uid://dngr5bi2vwywn" path="res://prefabs/enemies/RangeEnemy.tscn" id="7_wse8f"]
[ext_resource type="PackedScene" uid="uid://cp5vrxn3qs62e" path="res://prefabs/env/cat_house_single_exit.tscn" id="8_gbfbk"]
[ext_resource type="PackedScene" uid="uid://dbxlh41a8yprt" path="res://prefabs/env/cat_house_pass_through.tscn" id="9_ioo17"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_fj7yv"]
sky_top_color = Color(0.0593274, 0.467885, 0.74303, 1)
sky_horizon_color = Color(0.54302, 0.637409, 0.697195, 1)
ground_horizon_color = Color(0.54302, 0.637409, 0.697195, 1)

[sub_resource type="Sky" id="Sky_tlwt5"]
sky_material = SubResource("ProceduralSkyMaterial_fj7yv")

[sub_resource type="Environment" id="Environment_aqk2v"]
background_mode = 2
sky = SubResource("Sky_tlwt5")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="CapsuleMesh" id="CapsuleMesh_gv5m4"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_036b0"]
points = PackedVector3Array(-0.125207, -0.532801, -0.480507, 0.0227831, 0.47607, 0.498884, 0.169713, 0.559144, 0.464172, 0.231051, -0.803591, 0.320455, 0.40741, 0.651043, -0.243523, -0.482789, 0.594843, 0.0822132, -0.362868, -0.682312, 0.289697, 0.469044, -0.654529, -0.0662713, -0.127444, 0.842701, -0.338103, -0.393435, -0.683942, -0.244717, 0.438255, 0.623309, 0.200849, 0.0841477, 0.977454, 0.114795, -0.0682023, -0.976458, -0.12927, 0.20055, -0.563129, -0.451454, -0.185527, 0.595453, -0.453475, -0.273363, 0.592268, 0.407754, -0.00693649, -0.476823, 0.49966, 0.375821, -0.588614, 0.316955, 0.111579, 0.563059, -0.481177, -0.41725, 0.527866, -0.270497, -0.484546, -0.596972, -0.0665097, -0.279747, 0.908561, 0.0533361, -0.250197, -0.880712, 0.205319, 0.263647, -0.902771, -0.127394, 0.293368, 0.871526, -0.157196, 0.373412, -0.526319, -0.328246, 0.499663, 0.476641, -0.00688856, 0.0531056, 0.875001, 0.324703, -0.154543, -0.590854, 0.465879, -0.0972799, -0.782358, -0.398188, -0.387649, -0.498171, 0.31565, -0.30068, -0.587995, -0.388901)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_fj7yv"]
bg_color = Color(0.203922, 0.647059, 0.862745, 0.392157)

[sub_resource type="NavigationMesh" id="NavigationMesh_fj7yv"]
vertices = PackedVector3Array(1.32078, 14.1681, -1.53623, 1.32078, 14.1681, -0.536232, 7.32078, 14.1681, -0.536232, -5.92922, 14.4181, -1.53623, -5.92922, 15.1681, 0.213768, 0.320778, 15.1681, 0.213768, 0.320778, 14.4181, -1.53623, 7.32078, 14.1681, -32.7862, -14.1792, 14.1681, -32.7862, -13.6792, 14.1681, -23.0362, -19.1792, 14.1681, -27.0362, -14.4292, 14.1681, -23.2862, -13.6792, 14.1681, -0.536232, -6.92922, 14.1681, -0.536232, -6.92922, 14.1681, -1.53623, -34.6792, 7.41807, -8.53623, -35.1792, 7.41807, -8.28623, -30.4292, 7.66807, -5.28623, -34.4292, 7.91807, -9.78623, -18.9292, 13.9181, -18.7862, -22.0386, 14.1681, -23.8019, -18.9709, 14.1681, -20.1612, -24.919, 10.9181, -13.7805, -18.0292, 14.1681, -19.6862, -45.9292, 18.9181, 6.21377, -42.4292, 18.9181, 8.46377, -40.1792, 18.9181, 8.96377, -32.1792, 18.9181, 6.46377, -29.9292, 18.9181, 2.96377, -29.4292, 18.9181, 0.713768, -31.9292, 18.9181, -7.28623, -35.4292, 18.9181, -9.53623, -37.6792, 18.9181, -10.0362, -29.9292, 18.9181, -4.28623, -45.6792, 18.9181, -7.53623, -47.9292, 18.9181, -4.03623, -48.4292, 18.9181, -1.78623, -42.6792, 18.9181, -9.53623, -47.9292, 18.9181, 3.21377, -35.1792, 18.9181, 8.46377, -31.1792, 7.41807, -4.28623, -30.4292, 7.41807, -4.53623, -38.6792, 7.41807, -9.03623, -46.6792, 7.41807, 3.21377, -47.4292, 7.41807, 3.96377, -45.9292, 7.41807, 6.21377, -42.9292, 7.41807, 7.21377, -39.1792, 7.41807, 7.96377, -43.4292, 7.41807, 7.96377, -44.6792, 7.41807, -6.78623, -32.9292, 7.41807, 5.46377, -35.9292, 7.41807, 7.46377, -41.6792, 7.41807, -8.53623, -30.9292, 7.41807, 2.21377, -30.4292, 7.41807, -0.786232, -46.6792, 7.41807, -4.03623, -47.4292, 7.41807, -0.786232, -5.67922, 21.4181, 15.4638, 0.0707779, 21.4181, 15.4638, -5.72468, 20.9181, 12.691, 0.116234, 20.9181, 12.691, 4.32078, 32.9181, 16.9638, 0.820778, 32.9181, 14.4638, -1.67922, 32.9181, 13.9638, 6.82078, 32.9181, 23.7138, 6.07078, 32.9181, 19.7138, -11.9292, 32.9181, 26.9638, -10.1792, 32.9181, 29.7138, -7.42922, 32.9181, 31.9638, -3.92922, 32.9181, 32.9638, -9.67922, 32.9181, 16.4638, -11.6792, 32.9181, 19.4638, -12.4292, 32.9181, 22.7138, 3.82078, 32.9181, 30.4638, 6.07078, 32.9181, 27.2138, 0.820778, 32.9181, 32.4638, -6.42922, 32.9181, 14.4638, -11.1792, 21.4181, 22.2138, -11.1792, 21.4181, 24.7138, -10.6792, 21.4181, 26.7138, -8.92922, 21.4181, 29.4638, -5.67922, 21.4181, 31.4638, -8.92922, 21.4181, 17.4638, -10.4292, 21.4181, 19.7138, -3.17922, 21.4181, 31.9638, 0.570778, 21.4181, 31.2138, 2.82078, 21.4181, 29.7138, 5.07078, 21.4181, 26.4638, 5.57078, 21.4181, 23.9638, 4.82078, 21.4181, 19.9638, 2.82078, 21.4181, 17.2138)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(6, 5, 3), PackedInt32Array(3, 5, 4), PackedInt32Array(8, 7, 9), PackedInt32Array(9, 7, 0), PackedInt32Array(0, 7, 2), PackedInt32Array(11, 10, 9), PackedInt32Array(9, 10, 8), PackedInt32Array(13, 12, 14), PackedInt32Array(14, 12, 9), PackedInt32Array(6, 3, 9), PackedInt32Array(0, 6, 9), PackedInt32Array(3, 14, 9), PackedInt32Array(17, 16, 15), PackedInt32Array(21, 20, 10), PackedInt32Array(20, 22, 18), PackedInt32Array(18, 17, 15), PackedInt32Array(17, 22, 19), PackedInt32Array(19, 20, 21), PackedInt32Array(22, 17, 18), PackedInt32Array(20, 19, 22), PackedInt32Array(19, 21, 23), PackedInt32Array(23, 21, 11), PackedInt32Array(11, 21, 10), PackedInt32Array(26, 25, 24), PackedInt32Array(29, 28, 27), PackedInt32Array(31, 30, 32), PackedInt32Array(32, 30, 33), PackedInt32Array(32, 33, 29), PackedInt32Array(35, 34, 36), PackedInt32Array(36, 34, 37), PackedInt32Array(36, 37, 32), PackedInt32Array(24, 38, 36), PackedInt32Array(27, 39, 26), PackedInt32Array(27, 26, 29), PackedInt32Array(29, 26, 24), PackedInt32Array(29, 24, 36), PackedInt32Array(29, 36, 32), PackedInt32Array(41, 40, 17), PackedInt32Array(17, 40, 16), PackedInt32Array(16, 40, 42), PackedInt32Array(44, 43, 45), PackedInt32Array(45, 43, 46), PackedInt32Array(46, 43, 47), PackedInt32Array(46, 48, 45), PackedInt32Array(42, 40, 49), PackedInt32Array(49, 40, 50), PackedInt32Array(49, 50, 47), PackedInt32Array(49, 47, 43), PackedInt32Array(50, 51, 47), PackedInt32Array(49, 52, 42), PackedInt32Array(54, 53, 40), PackedInt32Array(40, 53, 50), PackedInt32Array(55, 49, 56), PackedInt32Array(56, 49, 43), PackedInt32Array(57, 59, 58), PackedInt32Array(58, 59, 60), PackedInt32Array(60, 59, 4), PackedInt32Array(60, 4, 5), PackedInt32Array(62, 61, 63), PackedInt32Array(63, 61, 65), PackedInt32Array(63, 65, 64), PackedInt32Array(67, 66, 68), PackedInt32Array(68, 66, 69), PackedInt32Array(71, 70, 72), PackedInt32Array(72, 70, 66), PackedInt32Array(73, 69, 64), PackedInt32Array(64, 69, 66), PackedInt32Array(64, 66, 70), PackedInt32Array(64, 70, 63), PackedInt32Array(64, 74, 73), PackedInt32Array(73, 75, 69), PackedInt32Array(70, 76, 63), PackedInt32Array(78, 77, 79), PackedInt32Array(79, 77, 80), PackedInt32Array(80, 77, 81), PackedInt32Array(83, 82, 77), PackedInt32Array(77, 82, 57), PackedInt32Array(84, 81, 85), PackedInt32Array(85, 81, 86), PackedInt32Array(87, 86, 88), PackedInt32Array(88, 86, 89), PackedInt32Array(58, 90, 89), PackedInt32Array(58, 89, 57), PackedInt32Array(57, 89, 77), PackedInt32Array(77, 89, 86), PackedInt32Array(77, 86, 81)]
agent_height = 0.5

[node name="World" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.351841, 0.248576, -0.902451, 0, 0.964095, 0.265556, 0.93606, 0.0934336, -0.339209, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_aqk2v")

[node name="Player" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 22.7625, 14.7206)
script = ExtResource("1_f3sb7")
damage_indicator_scene = ExtResource("2_036b0")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Player"]
mesh = SubResource("CapsuleMesh_gv5m4")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
shape = SubResource("ConvexPolygonShape3D_036b0")

[node name="Head" type="Node3D" parent="Player"]

[node name="Camera3D" type="Camera3D" parent="Player/Head"]
script = ExtResource("2_tlwt5")

[node name="Control" type="Control" parent="Player"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="CanvasLayer" type="CanvasLayer" parent="Player/Control"]

[node name="PanelContainer" type="PanelContainer" parent="Player/Control/CanvasLayer"]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -210.0
offset_top = -150.0
offset_right = 212.0
offset_bottom = -40.0
grow_horizontal = 2
grow_vertical = 0
theme_override_styles/panel = SubResource("StyleBoxFlat_fj7yv")

[node name="MarginContainer" type="MarginContainer" parent="Player/Control/CanvasLayer/PanelContainer"]
layout_mode = 2
theme_override_constants/margin_left = 5
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 5
theme_override_constants/margin_bottom = 5

[node name="ItemSelectionOverlay" type="GridContainer" parent="Player/Control/CanvasLayer/PanelContainer/MarginContainer"]
layout_mode = 2
columns = 4

[node name="Panel0" type="Panel" parent="Player/Control/CanvasLayer/PanelContainer/MarginContainer/ItemSelectionOverlay"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 2
theme_override_styles/panel = ExtResource("4_dwbse")

[node name="Wollbombe" type="Sprite2D" parent="Player/Control/CanvasLayer/PanelContainer/MarginContainer/ItemSelectionOverlay/Panel0"]
position = Vector2(48, 23)
texture = ExtResource("3_aqk2v")

[node name="Panel1" type="Panel" parent="Player/Control/CanvasLayer/PanelContainer/MarginContainer/ItemSelectionOverlay"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 2
theme_override_styles/panel = ExtResource("4_dwbse")

[node name="Gurke64x64" type="Sprite2D" parent="Player/Control/CanvasLayer/PanelContainer/MarginContainer/ItemSelectionOverlay/Panel1"]
position = Vector2(48.5, 48.5)
scale = Vector2(1.26563, 1.26563)
texture = ExtResource("6_pkg7o")

[node name="Panel2" type="Panel" parent="Player/Control/CanvasLayer/PanelContainer/MarginContainer/ItemSelectionOverlay"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 2
theme_override_styles/panel = ExtResource("4_dwbse")

[node name="Panel3" type="Panel" parent="Player/Control/CanvasLayer/PanelContainer/MarginContainer/ItemSelectionOverlay"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 2
theme_override_styles/panel = ExtResource("4_dwbse")

[node name="DamageFlesh" type="ColorRect" parent="Player/Control/CanvasLayer"]
modulate = Color(1, 1, 1, 0)
offset_right = 1920.0
offset_bottom = 1079.0
mouse_filter = 2
color = Color(1, 0, 0, 1)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_fj7yv")

[node name="RangeEnemy" parent="NavigationRegion3D" instance=ExtResource("7_wse8f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.55566, 15.7896, -25.4776)
preffered_distance = 15.0

[node name="cat_house_single_exit" parent="NavigationRegion3D" instance=ExtResource("8_gbfbk")]
transform = Transform3D(0.999994, 0, -0.00349065, 0, 1, 0, 0.00349065, 0, 0.999994, -2.87298, 19.5782, 23.4677)

[node name="cat_house_pass_through" parent="NavigationRegion3D" instance=ExtResource("9_ioo17")]
transform = Transform3D(0.698902, 0, -0.715217, 0, 1, 0, 0.715217, 0, 0.698902, -38.9299, 5.59693, -0.528578)

[node name="Platform" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, -3.17308, 13.2132, -16.7826)
use_collision = true
size = Vector3(10.9063, 0.570312, 16.5007)

[node name="CSGBox3D3" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(2, 0, 0, 0, 1.8208, 0.827448, 0, -0.827448, 1.8208, -2.75188, 16.7841, 5.23952)
use_collision = true
size = Vector3(3.45898, 0.269653, 9.97803)

[node name="CSGBox3D4" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(-1.50428, -0.445116, 1.24056, -0.0137864, 1.8877, 0.660593, -1.31793, 0.488308, -1.42289, -26.8763, 9.86917, -13.827)
use_collision = true
size = Vector3(3.26416, 0.269653, 11.1236)

[node name="Platform2" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(1.33637, 0, 1.48799, 0, 2, 0, -1.48799, 0, 1.33637, -15.8267, 13.2094, -26.3666)
use_collision = true
size = Vector3(6.33888, 0.560059, 3.29773)

[node name="ShootingEnemy" parent="NavigationRegion3D" instance=ExtResource("2_fj7yv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 17.842, -12.1267)
preffered_distance = 2.0
speed = 15.0
